# CSU-01.02.01: UI 레이아웃

## 1. CSU 간단 설명

`ui/layouts/` 디렉터리에 위치한 이 CSU는 Gemini CLI 애플리케이션의 전체적인 화면 구조를 정의하는 React 컴포넌트들을 포함합니다. 화면을 구성하는 주요 UI 컴포넌트(메인 콘텐츠, 입력창, 알림 등)들의 공간적 배치와 순서를 결정합니다.

이 CSU는 접근성을 고려하여 두 가지 종류의 레이아웃을 제공합니다.

- **`DefaultAppLayout.tsx`**: 일반 사용자를 위한 표준 시각적 레이아웃입니다.
- **`ScreenReaderAppLayout.tsx`**: 스크린 리더 사용자에게 최적화된, 논리적 순서의 레이아웃입니다.

## 2. CSU를 구성하는 변수와 함수 목록

### 주요 컴포넌트

| 컴포넌트명              | 설명                                                                               |
| ----------------------- | ---------------------------------------------------------------------------------- |
| `DefaultAppLayout`      | 표준 UI 레이아웃을 정의하는 React 함수형 컴포넌트입니다.                           |
| `ScreenReaderAppLayout` | 스크린 리더 사용자를 위한 대체 UI 레이아웃을 정의하는 React 함수형 컴포넌트입니다. |

## 3. 각 컴포넌트에 대한 입출력 및 함수 처리 설명

### 3.1 `DefaultAppLayout`

- **입력 (Props)**:
  - `width`: `string` (선택적, 기본값: '90%'). 애플리케이션의 전체 가로 너비를 지정합니다.
- **출력**: `React.ReactElement` (화면에 렌더링될 UI 구조)
- **함수 처리 설명**:
  - `useUIState()` Hook을 사용하여 UI 상태(`uiState`)를 가져옵니다. 이 상태는 다이얼로그 표시 여부(`dialogsVisible`) 등을 결정하는 데 사용됩니다.
  - Ink 라이브러리의 `<Box>` 컴포넌트를 사용하여 전체 화면을 수직(`flexDirection="column"`)으로 분할합니다.
  - **컴포넌트 배치 순서 (시각적 기준)**:
    1.  **`<MainContent />` (상단)**: 대화 내역이 표시되는 주 콘텐츠 영역입니다.
    2.  **하단 컨트롤 영역**:
        - **`<Notifications />`**: 사용자에게 전달되는 알림 메시지 영역입니다.
        - **`<DialogManager />` 또는 `<Composer />`**: `uiState.dialogsVisible` 값에 따라 조건부로 렌더링됩니다.
          - `true`일 경우: 설정, 도움말 등 다양한 다이얼로그를 관리하는 `<DialogManager />`가 표시됩니다.
          - `false`일 경우: 사용자가 프롬프트를 입력하는 `<Composer />`가 표시됩니다.
        - **`<ExitWarning />`**: 종료 시도 시 나타나는 경고 메시지입니다.

### 3.2 `ScreenReaderAppLayout`

- **입력 (Props)**: 없음
- **출력**: `React.ReactElement` (화면에 렌더링될 UI 구조)
- **함수 처리 설명**:
  - `DefaultAppLayout`과 마찬가지로 `useUIState()` Hook을 사용하여 UI 상태를 가져옵니다.
  - 스크린 리더가 콘텐츠를 논리적인 순서로 읽을 수 있도록 컴포넌트의 배치 순서를 재구성합니다.
  - **컴포넌트 배치 순서 (스크린 리더 기준)**:
    1.  **`<Notifications />`**: 가장 먼저 사용자에게 알림을 전달합니다.
    2.  **`<Footer />`**: 현재 상태를 요약하는 푸터 정보를 알림 다음에 제공합니다.
    3.  **`<MainContent />`**: 핵심 콘텐츠인 대화 내역을 중앙에 배치합니다.
    4.  **`<DialogManager />` 또는 `<Composer />`**: 콘텐츠 확인 후 사용자가 상호작용할 수 있는 입력창 또는 다이얼로그를 배치합니다.
    5.  **`<ExitWarning />`**: 가장 마지막으로 종료 관련 경고를 배치합니다.

## 4. 기타 참고사항

- 두 레이아웃 모두 동일한 하위 UI 컴포넌트들(`MainContent`, `Composer` 등)을 재사용하며, 오직 그 배치 순서와 구조만 다릅니다.
- 어떤 레이아웃을 사용할지는 최상위 렌더링 로직(`gemini.tsx`의 `startInteractiveUI` 함수 내 `render` 호출 시)에서 `isScreenReaderEnabled` 설정을 기반으로 결정됩니다.
- 이 CSU는 UI의 "뼈대"를 정의하며, 각 "뼈대"를 채우는 구체적인 UI 요소들은 `CSU-01.02.02: UI 컴포넌트`에서 정의됩니다.
